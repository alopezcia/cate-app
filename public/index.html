<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Registro Catequesis App</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="./style.css" rel="stylesheet"/>
    <script type="module">
      import { v4 as uuidv4 } from 'https://jspm.dev/uuid';
      localStorage.setItem("uuid", uuidv4());
      localStorage.removeItem("upload");
    </script>
    <script src="./app.js"></script>
  </head>

  <body>

   <div class="container">
    <form class="needs-validation" novalidate id="main-form">

    <!-- Anagramas -->
      <div class="row g-3">
        <div class="col-lg-1">
            <img src="./iglesia_parroquial_sant_vicent_ferrer.png" width="100px"  class="noverenmovil">
        </div>
  
        <div class="col-10 text-center">
            <div class="row" >
              <h3>FICHA DE INSCRIPCIÓN CATEQUESIS DE LA COMUNIDAD 2024/25</h3>
            </div>
  
            <div class="row py-1" >
              <div class="col-sm-2"><h5>Parroquia</h5></div>
              <div class="col-8">
                <!-- <input class="col-12" type="text" width="100%"> -->
                <select class="selectpicker col-12" name="parroquia">
                  <option>San Vicente Ferrer</option>
                  <option>La Inmaculada</option>
                  <option>Santa Isabel</option>
                </select>
              </div> 
            </div>

            <div class="row p-1">
              <div class="col-sm-2"><h5>Nivel</h5></div>
              <div class="col-8">
                <!-- <input class="col-12" type="text" width="100%"> -->
                <select class="selectpicker col-12" name="nivel">
                  <option>Despertar Religioso: 2º PRIMARIA</option>
                  <option>Pre-Comunión:        3º PRIMARIA</option>
                  <option>1a COMUNIÓN:         4º PRIMARIA</option>
                  <option>Grupos ITIO: 5º y 6º PRIMARIA, 1º y 2º ESO</option>
                  <option>Confirmación: 2º ESO, 1º BACH.</option>
                </select>
              </div> 
            </div>
        </div>
  
       
        <div class="col-lg-1">
            <img src="./parroquia_inmaculada_concepcion.png" width="100px" class="noverenmovil">
        </div>
      </div>

      <!-- Formulario -->
      <div>
        <div aria-labelledby="exampleModalLongTitle" class="modal fade" id="bookingmodal" role="dialog" tabindex="-1" style="display: none;" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <form>
                  <input type="button" id="reset" value="Borrar" class="btn btn-danger">
                </form>
                <!-- <span id="coords"><small>xxx yyy</small></span> -->
                <button aria-label="Close" class="close" data-dismiss="modal" type="button">
                  <span aria-hidden="true">×</span>
                </button>
              </div>
              <div class="modal-body">
                <div class="guide">
                  <div class="row item">
                    <div class="col-md-12 order-md-2">
                      <h2 class="item-heading"><span class="text-muted">Firma del progenitor/a</span></h2>
                      <canvas id="canvas"/>
                    </div>
                  </div>
                </div>
              </div>
              <div class="modal-footer">
                <!-- <span id="coords-calc"><small>xxx yyy</small></span> -->
                <button class="btn btn-secondary" data-dismiss="modal" type="button">Firmar</button>
              </div>
            </div>
          </div>
        </div>

        <!-- <form class="needs-validation" novalidate id="main-form"> -->
          <!-- Nombre y apellidos del niño -->
          <div class="row g-3">
            <div class="col-sm-6">
              <label for="apellidos" class="form-label">Del niño/a apellidos</label>
              <input type="text" class="form-control" id="apellidos" name="apellidos" placeholder="" value="" required>
              <div class="invalid-feedback">
                El valor para los apellidos es obligatorio
              </div>
            </div>
            <div class="col-sm-6">
              <label for="nombre" class="form-label">y nombre</label>
              <input type="text" class="form-control" id="nombre" name="nombre" placeholder="" value="" required>
              <div class="invalid-feedback">
                El valor para el nombre es obligatorio
              </div>
            </div>
          </div>

          <!-- Parroquia y fecha nacimiento -->
          <div class="row g-3">
            <div class="col-sm-8">
              <label for="bautizo" class="form-label">Parroquia donde se bautizó</label>
              <select class="selectpicker col-12" name="bautizo">
                <option>San Vicente Ferrer</option>
                <option>Inmaculada Concepción</option>
                <option>Santa Isabel</option>
                <option>Otra</option>
                <option>No está bautizado</option>
              </select>
              <!-- <input type="text" class="form-control" id="parroquia-bautizo" name="parroquia-bautizo" placeholder="" value="" required> -->
              <!-- <div class="invalid-feedback">
              El valor para la parroquia donde se bautizo es obligatorio
              </div> -->
            </div>
            <div class="col-sm-4">
              <label for="fechaNacimiento" class="form-label">Fecha de nacimiento (dd/mm/aaaa)</label>
              <input type="text" class="form-control" id="fechaNacimiento" name="fechaNacimiento" placeholder="" value="" required>
              <div class="invalid-feedback">
              La fecha de nacimiento es obligatoria
              </div>
            </div>
          </div>

          <!-- Colegio - Curso -->
          <div class="row g-3">
            <div class="col-sm-8">
              <label for="colegio" class="form-label">Colegio actual</label>
              <input type="text" class="form-control" id="colegio" name="colegio" placeholder="" value="" required>
              <div class="invalid-feedback">
                El valor para el colegio actual es obligatorio
              </div>
            </div>
            <div class="col-sm-4">
              <label for="curso" class="form-label">Curso escolar</label>
              <select class="selectpicker col-12" name="curso">
                <option>4º PRIMARIA</option>
                <option>6º PRIMARIA</option>
                <option>1º ESO</option>
                <option>2º ESO</option>
                <option>3º ESO</option>
                <option>4º ESO</option>
                <option>1º BACH.</option>
                <option>2º BACH.</option>
              </select>

              <!-- <input type="text" class="form-control" id="curso-escolar" name="curso-escolar" placeholder="" value="" required>
              <div class="invalid-feedback">
                El valor para el curso escolar es obligatorio
              </div> -->
            </div>
          </div>

          <!-- Nombre y apellidos del padre -->
          <div class="row g-3">
            <div class="col-sm-12">
              <label for="profesor" class="form-label">Nombre profesor religión</label>
              <input type="text" class="form-control" id="profesor" name="profesor" placeholder="">
            </div>
          </div>

          
          <hr>
          <!-- Nombre y apellidos del padre -->
          <div class="row g-3">
            <div class="col-sm-6">
              <label for="apellidosPadre" class="form-label">Del padre apellidos</label>
              <input type="text" class="form-control" id="apellidosPadre" id="apellidosPadre" name="apellidosPadre" placeholder="">
            </div>

            <div class="col-sm-6">
              <label for="nombrePadre" class="form-label">y nombre</label>
              <input type="text" class="form-control" id="nombrePadre" name="nombrePadre" placeholder="" value="">
            </div>
          </div>

          <!-- Dni y tlfno del padre -->
          <div class="row g-3">
            <div class="col-sm-6">
              <label for="dniPadre" class="form-label">DNI del padre</label>
              <input type="text" class="form-control" id="dniPadre" name="dniPadre" placeholder="" value="">
            </div>
            <div class="col-sm-6">
              <label for="telefonoPadre" class="form-label">Teléfono del padre</label>
              <input type="text" class="form-control" id="telefonoPadre" name="telefonoPadre" placeholder="" value="">
            </div>
          </div>

          <!-- Firma Padre -->
          <div class="row p-2">
            <!-- Firma Padre -->
            <div class="col-sm-12">
              <div class="col-12 text-center">
                <img id="firmadoPadre" width="200" height="100"/>
                <button type="button" class="btn btn-success" 
                      data-target="#bookingmodal" 
                      data-toggle="modal" data-bs-p="Padre">Firmar</button>
                <button type="button" id="certificadoPadre" class="redondeado" onclick="firmaConCertificado('Padre')" data-bs-p="Padre">
                  <img src="./certificate-icon-10.png" alt="buttonpng" width="30" height="30"/>
                </button>
              </div>
            </div>
          </div>
          <hr class="my-4">

          <!-- Nombre y apellidos de la madre -->
          <div class="row g-3">
            <div class="col-sm-6">
              <label for="apellidosMadre" class="form-label">De la madre apellidos</label>
              <input type="text" class="form-control" id="apellidosMadre" name="apellidosMadre" placeholder="" value="">
            </div>
            <div class="col-sm-6">
              <label for="nombreMadre" class="form-label">y nombre</label>
              <input type="text" class="form-control" id="nombreMadre" name="nombreMadre" placeholder="" value="">
            </div>
          </div>

          <!-- Dni y tlfn de la madre -->
          <div class="row g-3">
            <div class="col-sm-6">
              <label for="dniMadre" class="form-label">DNI de la madre</label>
              <input type="text" class="form-control" id="dniMadre" name="dniMadre" placeholder="" value="">
            </div>
            <div class="col-sm-6">
              <label for="telefonoMadre" class="form-label">Teléfono de la madre</label>
              <input type="text" class="form-control" id="telefonoMadre" name="telefonoMadre" placeholder="" value="">
            </div>
          </div>

          <!-- Firma Madre-->
          <div class="row p-2">
            <div class="col-sm-12">
              <div class="col-12 text-center">
                <img id="firmadoMadre" width="200" height="100"/>
                <button type="button" class="btn btn-success" 
                      data-target="#bookingmodal" 
                      data-toggle="modal" data-bs-p="Madre">Firmar</button>
                <button type="button" id="certificadoMadre" class="redondeado" onclick="firmaConCertificado('Madre')" data-bs-p="Madre">
                  <img src="./certificate-icon-10.png" alt="buttonpng" width="30" height="30"/>
                </button>
              </div>
            </div>
          </div>
          <hr class="my-4">

          <!-- Dirección y codpostal -->
          <div class="row g-3">
            <div class="col-sm-9">
              <label for="direccion" class="form-label">Dirección</label>
              <input type="text" class="form-control" id="direccion" name="direccion" placeholder="" value="" required>
              <div class="invalid-feedback">
                El valor para la dirección es obligatorio
              </div>
            </div>
  
            <div class="col-sm-3">
              <label for="codpost" class="form-label">C.P.</label>
              <input type="text" class="form-control" id="codpost" name="codpost" placeholder="" value="" required>
              <div class="invalid-feedback">
                El valor del código postal es obligatorio
              </div>
            </div>
          </div>
  
          <!-- e-mail -->
          <div class="row g-3">
            <div class="col-12">
              <label for="email" class="form-label">Email</label>
              <input type="email" class="form-control" id="email" name="email" >
              <div class="invalid-feedback">
                El valor del email de contacto es obligatorio
              </div>
            </div>
          </div>

          <!-- Alergias -->
          <div class="row g-3">
            <div class="col-12">
              <label for="alergias" class="form-label">Alergias, circunstancias epeciales en la familia, dificultades de aprendizaje, etc.</label>
              <textarea class="form-control" id="alergias" name="alergias" rows="3"></textarea>
            </div>
          </div>

          <!-- Comentarios -->
          <div class="row g-3">
            <div class="col-12">
              <label for="comentarios" class="form-label">Comentarios</label>
              <textarea class="form-control" id="comentarios" name="comentarios" rows="3"></textarea>
            </div>
          </div>

          <h5>PROTECCIÓN DE DATOS I:</h5>
          <div class="col-12">
            <div class="row">
              <div class="col-10">
                <p>IMAGEN DIGITAL: Consiento la publicación de la imagen en las Redes Sociales y WEB de las Parroquias como del Obispado de Orihuela-Alicante.</p>
              </div>
              <div class="col-2">
                <div class="form-check form-check-inline">
                  <input id="imagenDigitalSi" name="imagenDigital" type="radio" class="form-check-input" checked required>
                  <label class="form-check-label" for="imagenDigitalSi">SI</label>
                </div>
                <div class="form-check form-check-inline">
                  <input id="imagenDigitalNo" name="imagenDigital" type="radio" class="form-check-input" required>
                  <label class="form-check-label" for="imagenDigitalNo">NO</label>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-10">
                <p>IMAGEN IMPRESA: Consiento la publicación de imágenes en el Tablón de anuncios, revistas, orlas, anuario de la Parroquia o del Obispado de Orihuela-Alicante. Como en medios de comunicación externos.</p>
              </div>
              <div class="col-2">
                <div class="form-check form-check-inline">
                  <input id="imagenImpresaSi" name="imagenImpresa" type="radio" class="form-check-input" checked required>
                  <label class="form-check-label" for="imagenImpresaSi">SI</label>
                </div>
                <div class="form-check form-check-inline">
                  <input id="imagenImpresaNo" name="imagenImpresa" type="radio" class="form-check-input" required>
                  <label class="form-check-label" for="imagenImpresaNo">NO</label>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-10">
                <p>COMUNICACIONES: Consiento recibir por cualquier medio, incluidos los medios electrónicos, información de la Parroquia como del Obispado de Orihuela-Alicante de actividades, coordinación de grupos de pastoral o eventos religiosos.</p>
              </div>
              <div class="col-2">
                <div class="form-check form-check-inline">
                  <input id="comunicacionesSi" name="comunicaciones" type="radio" class="form-check-input" checked required>
                  <label class="form-check-label" for="comunicacionesSi">SI</label>
                </div>
                <div class="form-check form-check-inline">
                  <input id="comunicacionesNo" name="comunicaciones" type="radio" class="form-check-input" required>
                  <label class="form-check-label" for="comunicacionesNo">NO</label>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-10">
                <p>DATOS DE SALUD: Consiento el tratamiento de los datos de salud que serán tratados con la máxima confidencialidad para una correcta coordinación de las actividades, como en comidas o meriendas. En beneficio de los participantes.</p>
              </div>
              <div class="col-2">
                <div class="form-check form-check-inline">
                  <input id="datosSaludSi" name="datosSalud" type="radio" class="form-check-input" checked required>
                  <label class="form-check-label" for="datosSaludSi">SI</label>
                </div>
                <div class="form-check form-check-inline">
                  <input id="datosSaludNo" name="datosSalud" type="radio" class="form-check-input" required>
                  <label class="form-check-label" for="datosSaludNo">NO</label>
                </div>
              </div>
            </div>
          </div>

          <h5>PROTECCIÓN DE DATOS II:</h5>
          <div class="form-check form-check-inline">
            <input type="checkbox" class="form-check-input" id="aceptaTrat" name="aceptaTrat" required>
            <label class="form-check-label" for="aceptaTrat">Acepto el tratamiento de los datos Política de privacidad. Si se produce alguna modificación de sus datos, comuníquenoslo, para mantener sus datos actualizados. El abajo firmante, declara que los datos de contacto son ciertos y que se ha informado y obtenido el consentimiento para el tratamiento de datos por parte de las Parroquias. Para más información sobre tratamiento de los datos lo pueden solicitar a <a href="mailto:inscripcionsanvicenteferrer@gmail.com">inscripcionsanvicenteferrer@gmail.com</a></label>
          </div>

          <hr class="my-4">
          <h5 class="text-center">INFORMACIÓN BÁSICA SOBRE PROTECCIÓN DE DATOS</h5>
          <label><strong>Responsable</strong> PARROQUIA SAN VICENTE FERRER y PARROQUIA INMACULADA CONCEPCIÓN</label>
          <label><strong>DPO</strong> <a href="protecciondedatos@diocesisa.org">protecciondedatos@diocesisa.org</a></label>
          <label><strong>Finalidades</strong> Gestión  y  organización  de  los  grupos  de  pastoral  de  catequesis  de  iniciación  sacramental.  Uso  de  datos  de  salud  para  una  correctacoordinación en las actividades y para gestionar meriendas o comidas. Uso de la imagen. Realización de comunicados para coordinar las actividades a través de cualquier medio, incluido los electrónicos. Envíos informativos de la Parroquia o del Obispado de Orihuela-Alicante para informar de eventos.</label>
          <label><strong>Legitimación</strong> Consentimiento del interesado Padres/Madres o Tutores legales.</label>
          <label><strong>Destinatarios</strong> No se cederán datos a terceros, salvo olbigación legal o dando su consentimiento.</label>
          <label><strong>Derechos</strong> Acceso, rectificación, supresión, oposición y otros desarrollados en información adicional.</label>
          <label><strong>Información adicional</strong> <a href="mailto:inscripcioninmaculada@gmail.com">inscripcioninmaculada@gmail.com</a>  y <a href="inscripcionsanvicenteferrer@gmail.com">inscripcionsanvicenteferrer@gmail.com</a></label>

          <hr class="my-4">

                    
          <div class="mb-3">
            <form id="formFile">
              <label for="formFileLabel" class="form-label">Adjuntar resguardo del pago realizado</label>
              <input class="form-control" type="file" id="formFileLabel" accept="image/png, image/gif, image/jpeg">
              <button class="btn-danger" id="uploadBtn" hidden>Subir fichero</button>
            </form>
          </div>



          <button class="w-100 btn btn-primary btn-lg" type="submit" >Enviar la inscripción</button>
        </form>
        </div>
   </div>
  
	 <script>
      // Example POST method implementation:
      document.getElementById('formFile').onchange = formSelectFileChange;
      document.getElementById("formFile").addEventListener("submit", submitUpload );
      document.getElementById("main-form").addEventListener("submit", mainFormSubmitted);

			document.getElementById("reset").addEventListener("click", (event) => {
  			resetCanvas();
			});
			// Ajusta varios eventos del dialogo modal 
		  modalEvents();

	 </script>	

  </body>
</html>
